<%
   @title = "Event Details"
   @title_link = event_path(@event)
%>

<%= render partial: 'helpers/event_details' %>

<div class="col-xs-12">
<%= button_to "Attend Event", event_signup_path(@event), method: :get, class: 'pull-right' unless @event.attendees.include?(current_user) %>
<%= button_to "Leave Event", event_leave_path(@event), method: :get, class: 'pull-right' if @event.attendees.include?(current_user) %>
</div>

<hr />

<% if can? :edit, @event %>

<h3>Attendees</h3>
<br/>
<p>Count: <%= @event.attendees.count %></p>
<br/>
<% @event.attendees.each do |user| %>
<div class="row attendee">
  <div class="col-sm-12"><%= avatar_icon(user) %> <%= user.full_name %> <%= link_to "Remove", event_remove_attendee_path(@event, user_id: user.id), data: { confirm: "Remove #{user.full_name}?" } if can? :edit, @event %></div>
</div>
<% end %>

<hr />

<% else %>
<br />
<% end %>

<div class="row col-sm-12" style="padding-left: 0px;">
 <div class="col-xs-2">
  <div class='col-xs-6'>
   <%= link_to "Edit", edit_event_path(@event), method: :get, class: 'pull-left' if can? :edit, @event %>
  </div>
  <div class="col-xs-6">
   <%= link_to "Delete", event_path(@event), method: "delete", class: 'pull-left', data: { confirm: "Remove #{@event.title}?" } if can? :destroy, @event %>
  </div>
 </div>
 <div class="col-xs-10">
   <%= link_to "Close", calendar_path, class: 'pull-right' %>
 </div>
</div>